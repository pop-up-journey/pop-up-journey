echo "ğŸš€ GitHub Flow Pre-commit checks..."

# 1. ESLint ì²´í¬ - ì½”ë“œ í’ˆì§ˆ ë³´ì¥ (ì£¼ì„ ì»¨ë²¤ì…˜ í¬í•¨)
echo "ğŸ” Running ESLint..."
if ! pnpm lint; then
  echo "âŒ ESLint failed! Code quality issues detected."
  echo "ğŸ’¡ Please fix linting errors before committing."
  exit 1
fi

# 2. ë¹Œë“œ ì²´í¬ - ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœ í™•ì¸
echo "ğŸ”¨ Running build check..."
if ! pnpm build; then
 echo "âŒ Build failed! Code is not deployable."
  echo "ğŸ’¡ Please fix build errors before committing."
  exit 1
fi

# 3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ - ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸ (ì„ íƒì‚¬í•­)
if [ -f "package.json" ] && grep -q '"test"' package.json; then
  echo "ğŸ§ª Running tests..."
  if ! pnpm test; then
    echo "âŒ Tests failed! Functionality may be broken."
    echo "ğŸ’¡ Please fix failing tests before committing."
    exit 1
  fi
else
  echo "ğŸ“ No tests configured, skipping test step..."
fi

echo "âœ… All checks passed! Ready for GitHub Flow ğŸ‰"
